<html>
   <head>
      <title>Test </title>
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/ai.css">
   </head>
   <body>
    <!----- Header from main goes here ------>
    <header id="header"></header>

    <h1 style="margin-top: 60px;">Produkter:</h1>
    <ul id="kategorier">
    </ul>

    <!----- chat-box goes here ------>
    <div id="aiDiv"></div>

    </body>
    <script>
      //used to get element from main.html file
      async function loadHTML(id, file, elementId) {
        try {
          const response = await fetch(file);
          if (!response.ok) throw new Error('Feil ved lasting av ' + file);
          const content = await response.text();
    
          // Parse innholdet til et DOM-objekt
          const parser = new DOMParser();
          const doc = parser.parseFromString(content, 'text/html');
    
          // Finn elementet med det spesifikke id-et fra det hentede dokumentet
          const element = doc.getElementById(elementId);
    
          if (element) {
            document.getElementById(id).innerHTML = element.innerHTML;
          } else {
            console.error(`Element med id "${elementId}" ble ikke funnet i ${file}.`);
          }
          } catch (error) {
            console.error(error);
          }
        }

    //loads elements from main
    loadHTML('header', 'main.html', 'header');
    loadHTML('aiDiv', 'main.html', 'aiDiv');

    // finds all product categories
        fetch('https://raw.githubusercontent.com/GoogleChromeLabs/sample-pie-shop/refs/heads/master/src/data/products.json')
        .then(response => response.json())  // Konverterer JSON til JavaScript-objekter
        .then(produkter => {

            const items = produkter.products.data.items;

            lagKategorier(items);
        })
        .catch(error => console.error('Det oppstod en feil:', error));

        //makes the categories
        function lagKategorier(produkter) {
            let kategorier = [...new Set(produkter.map(produkt => produkt.category))];

            kategorier.forEach(kategori => {
                var kategoriListe = document.getElementById("kategorier");
                let nyKategori = document.createElement('li');

                nyKategori.innerHTML = `<a href="produkterIKat.html?category=${kategori}">${kategori}</a>`;
    
                kategoriListe.appendChild(nyKategori);
            });
        }
    </script>




   </body>

