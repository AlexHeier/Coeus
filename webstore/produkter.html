<html>
   <head>
      <title>Test </title>
      <link rel="stylesheet" href="css/style.css">
      <link rel="stylesheet" href="css/ai.css">
   </head>
   <body>
    <!----- Header from main goes here ------>
    <header id="header"></header>

    <h1 style="margin-top: 60px;">Produkter:</h1>
    <ul id="kategorier">
    </ul>

    <!----- chat-box goes here ------>
    <div id="aiDiv"></div>

    </body>
    <script>
      //used to get element from main.html file
      async function loadHTML(id, file, elementId) {
        try {
          const response = await fetch(file);
          if (!response.ok) throw new Error('Feil ved lasting av ' + file);
          const content = await response.text();
    
          // Parse innholdet til et DOM-objekt
          const parser = new DOMParser();
          const doc = parser.parseFromString(content, 'text/html');
    
          // Finn elementet med det spesifikke id-et fra det hentede dokumentet
          const element = doc.getElementById(elementId);
    
          if (element) {
            document.getElementById(id).innerHTML = element.innerHTML;
          } else {
            console.error(`Element med id "${elementId}" ble ikke funnet i ${file}.`);
          }
          } catch (error) {
            console.error(error);
          }
        }

    //loads elements from main
    loadHTML('header', 'index.html', 'header');
    loadHTML('aiDiv', 'index.html', 'aiDiv');

    // finds all product categories
    async function fetchCat() {
            try {
                const response = await fetch("http://localhost:3000/category");
                const kategorier = await response.json();
                
                lagKategorier(kategorier);
            } catch (error) {
                console.error("Feil ved henting av produkter:", error);
            }
          }
          document.addEventListener("DOMContentLoaded", fetchCat);

        //makes the categories
        function lagKategorier(kategoriene) {
            let kategorier = [...new Set(kategoriene.map(kategori => kategori.name))];

            kategorier.forEach(kategori => {
                var kategoriListe = document.getElementById("kategorier");
                let nyKategori = document.createElement('li');

                nyKategori.innerHTML = `<a href="produkterIKat.html?category=${kategori}">${kategori}</a>`;
    
                kategoriListe.appendChild(nyKategori);
            });
        }
    </script>




   </body>

